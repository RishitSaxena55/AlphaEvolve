<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Evolver</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Fira+Code&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 210 40% 98%;
            --primary-foreground: 222.2 47.4% 11.2%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 212.7 26.8% 83.9%;
            --radius: 0.5rem;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
        }
        .font-mono {
             font-family: 'Fira Code', monospace;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Header -->
    <header class="border-b border-[hsl(var(--border))] bg-[hsl(var(--card))] bg-opacity-50 backdrop-blur-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-[hsl(var(--foreground))]">AI Code Evolver</h1>
                        <p class="text-sm text-[hsl(var(--muted-foreground))]">Powered by Google Gemini</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.9 4.2-4.2 1.9 4.2 1.9L12 15l1.9-4.2 4.2-1.9-4.2-1.9L12 3Z"/><path d="M5 21v-4"/><path d="M19 21v-4"/><path d="M5 17h14"/></svg>
                        Beta
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="py-16 px-4">
        <div class="container mx-auto text-center max-w-4xl">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[hsl(var(--accent))] bg-opacity-10 text-[hsl(var(--accent-foreground))] mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14a1 1 0 0 1-.78-1.63l2.66-3.32a1 1 0 0 1 .78-.37h12.68a1 1 0 0 1 .78 1.63l-2.66 3.32a1 1 0 0 1-.78.37H4Z"/><path d="m14 4-3 4H9"/></svg>
                <span class="text-sm font-medium">Optimize Python Code with AI</span>
            </div>
            <h2 class="text-4xl md:text-6xl font-bold mb-6" style="text-wrap: balance;">
                Transform Your Code with
                <span class="bg-gradient-to-r from-[hsl(var(--primary))] to-[hsl(var(--accent))] bg-clip-text text-transparent">
                    AI Intelligence
                </span>
            </h2>
            <p class="text-xl text-[hsl(var(--muted-foreground))] mb-8 max-w-2xl mx-auto" style="text-wrap: balance;">
                Paste your Python function and let advanced AI discover more efficient, Pythonic solutions. Powered by Google's Gemini AI for professional-grade code optimization.
            </p>
        </div>
    </section>

    <!-- Main Application -->
    <section class="pb-16 px-4">
        <div class="container mx-auto max-w-7xl">
            <!-- API Key Input -->
            <div class="mb-8 max-w-md mx-auto p-6 bg-[hsl(var(--card))] border border-[hsl(var(--border))] rounded-lg">
                <div class="pb-4">
                    <h3 class="text-lg font-semibold flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>
                        API Configuration
                    </h3>
                    <p class="text-sm text-[hsl(var(--muted-foreground))]">Enter your Google AI Studio API key to get started</p>
                </div>
                <div>
                    <label for="apiKey" class="text-sm font-medium">Google AI Studio API Key</label>
                    <input id="apiKey" type="password" placeholder="Enter your API key..." class="mt-2 w-full p-2 bg-[hsl(var(--input))] border border-[hsl(var(--border))] rounded-md font-mono focus:ring-2 focus:ring-[hsl(var(--ring))] focus:outline-none">
                </div>
            </div>

            <!-- Code Evolution Interface -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                <!-- Input Code -->
                <div class="p-6 bg-[hsl(var(--card))] border border-[hsl(var(--border))] rounded-lg h-fit">
                    <h3 class="text-lg font-semibold flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
                        Your Code
                    </h3>
                    <p class="text-sm text-[hsl(var(--muted-foreground))] mb-4">Paste your Python function here for optimization</p>
                    <textarea id="userCode" placeholder="def your_function():\n  # Your code here\n  pass" class="w-full min-h-[400px] p-4 bg-[hsl(var(--muted))] rounded-lg font-mono text-sm resize-none border border-[hsl(var(--border))] focus:ring-2 focus:ring-[hsl(var(--ring))] focus:outline-none" spellcheck="false">def reverse_function(s):
    reversed_s = ""
    for char in s:
        reversed_s = char + reversed_s
    return reversed_s</textarea>
                </div>

                <!-- Output Code -->
                <div class="p-6 bg-[hsl(var(--card))] border border-[hsl(var(--border))] rounded-lg h-fit">
                     <h3 class="text-lg font-semibold flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.9 4.2-4.2 1.9 4.2 1.9L12 15l1.9-4.2 4.2-1.9-4.2-1.9L12 3Z"/><path d="M5 21v-4"/><path d="M19 21v-4"/><path d="M5 17h14"/></svg>
                        AI Evolved Code
                    </h3>
                    <p class="text-sm text-[hsl(var(--muted-foreground))] mb-4">Optimized version will appear here</p>
                    <div id="evolvedCode" class="min-h-[400px] p-4 bg-[hsl(var(--muted))] rounded-lg font-mono text-sm whitespace-pre-wrap overflow-auto">
                        <div id="placeholder" class="flex items-center justify-center h-full text-[hsl(var(--muted-foreground))]">
                            Click "Evolve Code" to see the optimized version
                        </div>
                    </div>
                </div>
            </div>

            <!-- Evolution Controls -->
            <div class="mt-8 text-center space-y-4">
                <button id="evolveButton" class="px-8 py-3 text-lg font-semibold bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] rounded-lg inline-flex items-center justify-center disabled:opacity-50 hover:opacity-90 transition-opacity">
                    <span class="button-content">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2 inline"><path d="m12 3-1.9 4.2-4.2 1.9 4.2 1.9L12 15l1.9-4.2 4.2-1.9-4.2-1.9L12 3Z"/><path d="M5 21v-4"/><path d="M19 21v-4"/><path d="M5 17h14"/></svg>
                        Evolve Code
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 ml-2 inline"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                    </span>
                </button>
                <p id="status" class="text-[hsl(var(--muted-foreground))] font-medium">Ready to evolve your code</p>
            </div>
        </div>
    </section>

    <hr class="my-16 border-[hsl(var(--border))]">

    <!-- Footer -->
    <footer class="py-12 px-4 bg-[hsl(var(--card))] bg-opacity-30">
        <div class="container mx-auto">
            <div class="text-center space-y-4">
                <div class="flex items-center justify-center gap-2 text-[hsl(var(--muted-foreground))]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
                    <span class="text-sm">Inspired by Google DeepMind research: AlphaEvolve</span>
                </div>
                <div class="flex items-center justify-center gap-4">
                     <a href="https://github.com/RishitSaxena55/AlphaEvolve" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center gap-2 text-sm text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
                        GitHub
                    </a>
                    <a href="https://www.linkedin.com/in/rishit-saxena-12922531b/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center gap-2 text-sm text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                        LinkedIn
                    </a>
                </div>
                <p class="text-xs text-[hsl(var(--muted-foreground))]">Built with Next.js, Tailwind CSS, and shadcn/ui</p>
            </div>
        </div>
    </footer>

<script>
    const apiKeyInput = document.getElementById('apiKey');
    const userCodeTextarea = document.getElementById('userCode');
    const evolvedCodeDiv = document.getElementById('evolvedCode');
    const evolveButton = document.getElementById('evolveButton');
    const statusP = document.getElementById('status');
    const placeholderDiv = document.getElementById('placeholder');
    const buttonContentSpan = evolveButton.querySelector('.button-content');

    const originalButtonHTML = buttonContentSpan.innerHTML;
    const loadingButtonHTML = `<div class="w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"></div> Evolving...`;

    evolveButton.addEventListener('click', handleEvolveClick);

    const createPrompt = (codeString) => {
        return `You are an expert Python programmer. Your task is to take a given Python function and propose a functionally equivalent but more efficient and Pythonic version. Your goal is to dramatically improve the function's performance. **CRITICAL**: You must provide *only* the complete, new Python function in your response. Do not include any explanations, introductory text, or markdown formatting like \`\`\`python. Here is the function to improve:\n\`\`\`python\n${codeString}\n\`\`\``;
    };

    const getLlmSuggestion = async (apiKey, userCode) => {
        const model = "gemini-1.5-flash-latest";
        const apiURL = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
        const prompt = createPrompt(userCode);
        const payload = {
            contents: [{ parts: [{ text: prompt }] }],
        };

        statusP.textContent = "AI is analyzing your code...";
        const response = await fetch(apiURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error.message || "API request failed");
        }

        const data = await response.json();
        if (!data.candidates || !data.candidates[0].content.parts[0].text) {
            throw new Error("Invalid response from API.");
        }

        const cleanedCode = data.candidates[0].content.parts[0].text
            .trim()
            .replace(/^```python\s*/, "")
            .replace(/```$/, "")
            .trim();

        return cleanedCode;
    };

    const handleEvolveClick = async () => {
        const apiKey = apiKeyInput.value.trim();
        const userCode = userCodeTextarea.value.trim();

        if (!apiKey) {
            statusP.textContent = "Please enter your API key";
            return;
        }
        if (!userCode) {
            statusP.textContent = "Please enter code to evolve";
            return;
        }

        evolveButton.disabled = true;
        buttonContentSpan.innerHTML = loadingButtonHTML;
        statusP.textContent = "Connecting to Gemini AI...";
        if (placeholderDiv) placeholderDiv.remove();
        evolvedCodeDiv.textContent = "";

        try {
            const evolved = await getLlmSuggestion(apiKey, userCode);
            evolvedCodeDiv.textContent = evolved;
            statusP.textContent = "Evolution complete! 🎉";
        } catch (error) {
            statusP.textContent = `Error: ${error instanceof Error ? error.message : "Unknown error"}`;
            console.error(error);
        } finally {
            evolveButton.disabled = false;
            buttonContentSpan.innerHTML = originalButtonHTML;
        }
    };
</script>

</body>
</html>
